<h2 class="mb-5">Administration View</h2>
<h4>User List</h4>
<table class="table table-hover">
  <thead>
    <tr>
      <th scope="col">Personel</th>
      <th scope="col">Engineer</th>
      <th scope="col">Admin</th>
      <th scope="col">Edit</th>
      <th scope="col">Delete</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let user of userlist">
      <td>{{ user.username }}</td>
      <td>{{ user.pw }}</td>
      <td>{{ user.eng }}</td>
      <td>{{ user.admin }}</td>
      <td>
        <button class="btn btn-primary" (click)="edit()">
          <i class="far fa-edit"></i>
        </button>
      </td>
      <td>
        <button class="btn btn-danger" (click)="delete()">
          <i class="fas fa-user-minus"></i>
        </button>
      </td>
    </tr>
  </tbody>
</table>

<h4>Add / Edit User</h4>

<form [formGroup]="userForm" (ngSubmit)="onSubmit()">
  <div class="form-group">
    <label>eMail: </label>
    <input
      type="email"
      formControlName="uname"
      class="form-control"
      [ngClass]="{ 'is-invalid': submitted && f.uname.errors }"
      name="uname"
      placeholder="user name is your email address"
    />
    <div *ngIf="submitted && f.uname.errors" class="invalid-feedback">
      <div *ngIf="f.uname.errors.required">Email is required</div>
      <div *ngIf="f.uname.errors.email">Email must be a valid email address</div>
    </div>
  </div>

  <div class="form-group">
    <label for="pw1">Password: </label>
    <input
      class="form-control mr-3"
      type="text"
      formControlName="pw1"
      name="pw1"
      id="pw1"
      placeholder="password"
      [ngClass]="{ 'is-invalid': submitted && f.pw1.errors }"
      required
    />
    <div *ngIf="submitted && f.pw1.errors" class="invalid-feedback">
      <div *ngIf="f.pw1.errors.required">Password is required</div>
      <div *ngIf="f.pw1.errors.minlength">Password must be at least 6 characters</div>
    </div>
  </div>
  <div class="form-group">
    <label for="pw2"> Confirm Password: </label>
    <input
      class="form-control mr-3"
      type="text"
      class="form-control mr-3"
      formControlName="pw2"
      name="pw2"
      id="pw2"
      placeholder="match password"
      [ngClass]="{ 'is-invalid': submitted && f.pw2.errors }"
      required
    />
    <div *ngIf="submitted && f.pw2.errors" class="invalid-feedback">
      <div *ngIf="f.pw2.errors.required">Confirm Password is required</div>
      <div *ngIf="f.pw2.errors.mustMatch">Passwords must match</div>
    </div>
  </div>

  <div class="form-group">
    <label for="">Permissions: </label>
    <div class="form-check form-check-inline ml-5">
      <input
        class="form-check-input"
        formControlName="check_eng"
        name="check_eng"
        type="checkbox"
        value=""
        id="check_eng"
        required
      />
      <label class="form-check-label" for="check_eng"> Engineer </label>
    </div>
    <div class="form-check form-check-inline">
      <input
        class="form-check-input"
        formControlName="check_admin"
        name="check_admin"
        type="checkbox"
        value=""
        id="check_admin"
      />
      <label class="form-check-label" for="check_admin"> Admin </label>
    </div>

    <p class="invalid-feedback">"You must give a permission to the user.</p>
  </div>
  <div class="form-group">
    <div class="btn-group">
      <button type="submit" class="btn btn-primary">Submit</button>
      <button
        type="button"
        class="btn btn-secondary"
        (click)="onLoadDataClick()"
      >
        Load User
      </button>
    </div>
  </div>
</form>
<code>
  paswword match: {{ pwMatch }}<br />
  Form touched: {{ userForm.touched }}<br />
  Form dirty:{{ userForm.dirty }}<br />
  Form Valid: {{ userForm.dirty }}<br />
  Form Values: {{ userForm.value | json }}<br />
  <hr />
  uname touched: {{ userForm.get('pw1').touched }}<br />
  uname dirty: {{ userForm.get('pw1').dirty }}<br />
  uname Valid: {{ userForm.get('pw1').valid }}<br />
  uname Values: {{ userForm.get('pw1').value }}<br />
</code>
